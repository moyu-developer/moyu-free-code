import type { NextPage } from 'next'
import Head from 'next/head'
import { Button, Layout, Tooltip } from '@douyinfe/semi-ui'
import {
  IconShoppingBag,
  IconTerminal,
  IconSourceControl,
  IconBox,
  IconSetting
} from '@douyinfe/semi-icons'
import {
  MaterialBasicProduct,
  MaterialContainerProvider,
  MaterialRenderCanvas,
  MaterialConfiguration,
  MaterialNavigationTabs,
  MaterialSchemeView,
  MaterialComponentTree,
  MaterialRemoteProduct,
  MaterialPageInfoModal
} from '@moyu-code/control'
import * as Components from 'antd-mobile'
import * as Materials from '@moyu-code/materials'
import { MaterialComponentType } from '@moyu-code/schema'

import styles from '@/styles/layout.module.css'

const materials: MaterialComponentType[] = Object.keys(Materials).map(
  (k: string) => (Materials as any)[k]
)

const Example: NextPage = () => {
  /** @name dslView 页面结构 */

  return (
    <Layout className={styles.app}>
      <Head>
        <title>example</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      {/* 标准层 */}
      <MaterialContainerProvider materials={materials}>
        <MaterialNavigationTabs
          extra={
            <MaterialPageInfoModal>
              <Button type='secondary' icon={<IconSetting />} />
            </MaterialPageInfoModal>
          }
          components={[
            {
              tab: (
                <Tooltip content='组件中心' position='right'>
                  <IconBox size='large' />
                </Tooltip>
              ),
              render: <MaterialBasicProduct />,
              itemKey: 'MaterialBasicProduct1'
            },
            {
              tab: (
                <Tooltip content='组件商店' position='right'>
                  <IconShoppingBag size='large' />
                </Tooltip>
              ),
              render: <MaterialRemoteProduct />,
              itemKey: 'MaterialRemoteProduct'
            },
            {
              tab: (
                <Tooltip content='组件树🌲' position='right'>
                  <IconSourceControl size='large' />
                </Tooltip>
              ),
              render: <MaterialComponentTree />,
              itemKey: 'MaterialComponentTree'
            },
            {
              tab: (
                <Tooltip content='JSON Schema' position='right'>
                  <IconTerminal size='large' />
                </Tooltip>
              ),
              render: <MaterialSchemeView />,
              itemKey: 'MaterialSchemeView'
            }
          ]}
        />
        {/* 物料列表区 */}
        {/* <MaterialBasicProduct /> */}
        {/* 渲染器 */}
        <MaterialRenderCanvas
          materialComponents={{
            ...(Components as any)
          }}
        />
        {/* 属性编辑器 */}
        <MaterialConfiguration />
      </MaterialContainerProvider>
    </Layout>
  )
}

export default Example
